(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[943],{24516:function(e,t,a){Promise.resolve().then(a.bind(a,3186))},3186:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return c}});var s=a(57437),r=a(2265),n=a(59143),l=a(27648);let i={Active:"bg-green-500",Complete:"bg-blue-500",Queued:"bg-amber-400",Backlog:"bg-gray-300",Paused:"bg-gray-400",Overdue:"bg-red-500"};function d(e){let{projects:t,groupBy:a}=e,{groups:n,minDate:d,maxDate:o,todayX:c,chartWidth:m,monthLabels:u}=(0,r.useMemo)(()=>{let e=new Map;for(let s of t){let t=s[a];e.has(t)||e.set(t,[]),e.get(t).push(s)}let s=Array.from(e.entries()).sort((e,t)=>e[0].localeCompare(t[0])),r=new Date(Math.min(...t.map(e=>new Date(e.dates.planned_start).getTime()))),n=new Date(Math.max(...t.map(e=>new Date(e.dates.planned_end).getTime())));r=new Date(r.getFullYear(),r.getMonth(),1);let l=Math.max((((n=new Date(n.getFullYear(),n.getMonth()+2,0)).getFullYear()-r.getFullYear())*12+(n.getMonth()-r.getMonth())+1)*24,600),i=[],d=new Date(r);for(;d<=n;)i.push(d.toLocaleDateString("en-US",{month:"short",year:"2-digit"})),d.setMonth(d.getMonth()+1);let o=new Date,c=o>=r&&o<=n?(o.getTime()-r.getTime())/(n.getTime()-r.getTime())*l:-1;return{groups:s,minDate:r,maxDate:n,todayX:c,chartWidth:l,monthLabels:i}},[t,a]);return(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsxs)("div",{className:"flex",style:{width:200+m},children:[(0,s.jsx)("div",{className:"shrink-0 pr-2",style:{width:200},children:(0,s.jsx)("div",{className:"h-8 text-xs font-medium text-gray-500",children:"Group / Project"})}),(0,s.jsx)("div",{className:"relative shrink-0 overflow-x-auto",style:{width:m},children:(0,s.jsx)("div",{className:"flex gap-0 text-xs font-medium text-gray-500",children:u.map((e,t)=>(0,s.jsx)("div",{style:{width:24},className:"shrink-0 text-center",children:e},"".concat(e,"-").concat(t)))})})]}),n.map(e=>{let[t,a]=e;return(0,s.jsx)("div",{className:"border-t border-gray-100 first:border-t-0",children:(0,s.jsxs)("div",{className:"flex items-stretch font-medium text-primary",style:{minHeight:40},children:[(0,s.jsx)("div",{className:"flex shrink-0 items-center pr-2 text-sm",style:{width:200},children:t}),(0,s.jsxs)("div",{className:"relative shrink-0 overflow-hidden",style:{width:m,height:40*a.length},children:[c>=0&&(0,s.jsx)("div",{className:"absolute top-0 bottom-0 w-0.5 bg-red-500 z-10",style:{left:c},title:"Today"}),a.map((e,t)=>{var a;let r=new Date(e.dates.planned_start),n=new Date(e.dates.planned_end),c=(r.getTime()-d.getTime())/(o.getTime()-d.getTime())*m,u=(n.getTime()-r.getTime())/(o.getTime()-d.getTime())*m,h=null!==(a=i[e.status])&&void 0!==a?a:"bg-gray-400";return(0,s.jsxs)("div",{className:"absolute flex items-center",style:{top:40*t,left:c,width:Math.max(u,20),height:36},children:[(0,s.jsx)(l.default,{href:"/projects/".concat(e.slug,"/"),className:"flex h-full flex-1 items-center rounded px-1 text-xs font-medium text-white ".concat(h," hover:opacity-90"),title:"".concat(e.title," (").concat(e.dates.planned_start," – ").concat(e.dates.planned_end,")"),children:(0,s.jsx)("span",{className:"truncate",children:e.title})}),(0,s.jsx)("span",{className:"ml-0.5 text-red-600",title:"Milestone","aria-hidden":!0,children:"◆"})]},e.id)})]})]})},t)})]})}var o=a(24350);function c(){var e;let{data:t,loading:a}=(0,n.e)(),[l,i]=(0,r.useState)("department"),c=(0,r.useMemo)(()=>{var e;return null!==(e=null==t?void 0:t.projects)&&void 0!==e?e:[]},[null==t?void 0:t.projects]);return a?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h1",{className:"font-heading text-2xl font-bold text-primary",children:"Roadmap"}),(0,s.jsx)("div",{className:"h-96 rounded-xl border border-gray-200 bg-white p-6",children:(0,s.jsx)(o.Od,{className:"h-full w-full"})})]}):(null==t?void 0:null===(e=t.config.modules)||void 0===e?void 0:e.enable_gantt)?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,s.jsx)("h1",{className:"font-heading text-2xl font-bold text-primary",children:"Roadmap"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Group by"}),(0,s.jsxs)("select",{value:l,onChange:e=>i(e.target.value),className:"rounded-lg border border-gray-200 bg-white px-3 py-1.5 text-sm",children:[(0,s.jsx)("option",{value:"department",children:"Department"}),(0,s.jsx)("option",{value:"status",children:"Status"})]})]})]}),(0,s.jsx)("div",{className:"overflow-x-auto rounded-xl border border-gray-200 bg-white p-4",children:(0,s.jsx)(d,{projects:c,groupBy:l})})]}):(0,s.jsx)("div",{className:"rounded-xl border border-amber-200 bg-amber-50 p-6 text-amber-800",children:"Roadmap (Gantt) is disabled for this tenant."})}},24350:function(e,t,a){"use strict";a.d(t,{Go:function(){return n},Od:function(){return r}});var s=a(57437);function r(e){let{className:t=""}=e;return(0,s.jsx)("div",{className:"animate-skeleton rounded bg-gray-200 dark:bg-gray-700 ".concat(t),"aria-hidden":!0})}function n(){return(0,s.jsxs)("div",{className:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm",children:[(0,s.jsx)(r,{className:"mb-2 h-4 w-24"}),(0,s.jsx)(r,{className:"h-8 w-32"})]})}},59143:function(e,t,a){"use strict";a.d(t,{DataProvider:function(){return l},e:function(){return i}});var s=a(57437),r=a(2265);let n=(0,r.createContext)({data:null,loading:!0});function l(e){let{children:t}=e,[a,l]=(0,r.useState)(null),[i,d]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{fetch("/master_data.json").then(e=>e.json()).then(e=>{l(e),d(!1)}).catch(()=>d(!1))},[]),(0,s.jsx)(n.Provider,{value:{data:a,loading:i},children:t})}function i(){let e=(0,r.useContext)(n);if(!e)throw Error("useData must be used within DataProvider");return e}}},function(e){e.O(0,[648,971,117,744],function(){return e(e.s=24516)}),_N_E=e.O()}]);