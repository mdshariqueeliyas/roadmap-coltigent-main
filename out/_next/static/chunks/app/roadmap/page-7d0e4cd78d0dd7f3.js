(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[943],{24516:function(e,t,a){Promise.resolve().then(a.bind(a,3186))},3186:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return c}});var s=a(57437),n=a(2265),l=a(59143),r=a(27648);let i={Active:"bg-emerald-500",Complete:"bg-indigo-500",Queued:"bg-amber-500",Backlog:"bg-slate-400",Paused:"bg-slate-500",Overdue:"bg-rose-500"};function d(e){let{projects:t,groupBy:a}=e,{groups:l,minDate:d,maxDate:o,todayX:c,chartWidth:m,monthLabels:u}=(0,n.useMemo)(()=>{let e=new Map;for(let s of t){let t=s[a];e.has(t)||e.set(t,[]),e.get(t).push(s)}let s=Array.from(e.entries()).sort((e,t)=>e[0].localeCompare(t[0])),n=new Date(Math.min(...t.map(e=>new Date(e.dates.planned_start).getTime()))),l=new Date(Math.max(...t.map(e=>new Date(e.dates.planned_end).getTime())));n=new Date(n.getFullYear(),n.getMonth(),1);let r=Math.max((((l=new Date(l.getFullYear(),l.getMonth()+2,0)).getFullYear()-n.getFullYear())*12+(l.getMonth()-n.getMonth())+1)*24,600),i=[],d=new Date(n);for(;d<=l;)i.push(d.toLocaleDateString("en-US",{month:"short",year:"2-digit"})),d.setMonth(d.getMonth()+1);let o=new Date,c=o>=n&&o<=l?(o.getTime()-n.getTime())/(l.getTime()-n.getTime())*r:-1;return{groups:s,minDate:n,maxDate:l,todayX:c,chartWidth:r,monthLabels:i}},[t,a]);return(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsxs)("div",{className:"flex",style:{width:200+m},children:[(0,s.jsx)("div",{className:"shrink-0 pr-2",style:{width:200},children:(0,s.jsx)("div",{className:"h-8 text-xs font-semibold text-slate-600",children:"Group / Project"})}),(0,s.jsx)("div",{className:"relative shrink-0 overflow-x-auto",style:{width:m},children:(0,s.jsx)("div",{className:"flex gap-0 text-xs font-semibold text-slate-600",children:u.map((e,t)=>(0,s.jsx)("div",{style:{width:24},className:"shrink-0 text-center",children:e},"".concat(e,"-").concat(t)))})})]}),l.map(e=>{let[t,a]=e;return(0,s.jsx)("div",{className:"border-t border-slate-200 first:border-t-0",children:(0,s.jsxs)("div",{className:"flex items-stretch font-medium text-primary",style:{minHeight:40},children:[(0,s.jsx)("div",{className:"flex shrink-0 items-center pr-2 text-sm",style:{width:200},children:t}),(0,s.jsxs)("div",{className:"relative shrink-0 overflow-hidden",style:{width:m,height:40*a.length},children:[c>=0&&(0,s.jsx)("div",{className:"absolute top-0 bottom-0 w-0.5 bg-rose-500 z-10",style:{left:c},title:"Today"}),a.map((e,t)=>{var a;let n=new Date(e.dates.planned_start),l=new Date(e.dates.planned_end),c=(n.getTime()-d.getTime())/(o.getTime()-d.getTime())*m,u=(l.getTime()-n.getTime())/(o.getTime()-d.getTime())*m,h=null!==(a=i[e.status])&&void 0!==a?a:"bg-gray-400";return(0,s.jsxs)("div",{className:"absolute flex items-center",style:{top:40*t,left:c,width:Math.max(u,20),height:36},children:[(0,s.jsx)(r.default,{href:"/projects/".concat(e.slug,"/"),className:"flex h-full flex-1 items-center rounded-lg px-2 text-xs font-semibold text-white shadow-sm ".concat(h," hover:opacity-95 transition-opacity"),title:"".concat(e.title," (").concat(e.dates.planned_start," – ").concat(e.dates.planned_end,")"),children:(0,s.jsx)("span",{className:"truncate",children:e.title})}),(0,s.jsx)("span",{className:"ml-0.5 text-rose-500",title:"Milestone","aria-hidden":!0,children:"◆"})]},e.id)})]})]})},t)})]})}var o=a(24350);function c(){var e;let{data:t,loading:a}=(0,l.e)(),[r,i]=(0,n.useState)("department"),c=(0,n.useMemo)(()=>{var e;return null!==(e=null==t?void 0:t.projects)&&void 0!==e?e:[]},[null==t?void 0:t.projects]);return a?(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsx)("h1",{className:"font-heading text-3xl font-bold tracking-tight text-slate-800",children:"Roadmap"}),(0,s.jsx)("div",{className:"h-96 rounded-2xl border border-slate-200 bg-white p-6",children:(0,s.jsx)(o.Od,{className:"h-full w-full rounded-xl"})})]}):(null==t?void 0:null===(e=t.config.modules)||void 0===e?void 0:e.enable_gantt)?(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"font-heading text-3xl font-bold tracking-tight text-slate-800",children:"Roadmap"}),(0,s.jsx)("p",{className:"mt-1 text-slate-600",children:"Timeline view by department or status"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Group by"}),(0,s.jsxs)("select",{value:r,onChange:e=>i(e.target.value),className:"rounded-xl border border-slate-200 bg-white px-4 py-2.5 text-sm font-medium text-slate-800 focus:border-indigo-300 focus:ring-2 focus:ring-indigo-500/20","aria-label":"Group roadmap by",children:[(0,s.jsx)("option",{value:"department",children:"Department"}),(0,s.jsx)("option",{value:"status",children:"Status"})]})]})]}),(0,s.jsx)("div",{className:"overflow-x-auto rounded-2xl border border-slate-200/80 bg-white p-6 shadow-card print-break-inside-avoid",children:(0,s.jsx)(d,{projects:c,groupBy:r})})]}):(0,s.jsx)("div",{className:"rounded-2xl border-2 border-amber-200 bg-amber-50/80 p-6 text-amber-800",children:"Roadmap (Gantt) is disabled for this tenant."})}},24350:function(e,t,a){"use strict";a.d(t,{Go:function(){return l},Od:function(){return n}});var s=a(57437);function n(e){let{className:t=""}=e;return(0,s.jsx)("div",{className:"animate-skeleton rounded-xl bg-slate-200 ".concat(t),"aria-hidden":!0})}function l(){return(0,s.jsxs)("div",{className:"dashboard-card",children:[(0,s.jsx)(n,{className:"mb-3 h-4 w-28 rounded-lg"}),(0,s.jsx)(n,{className:"h-9 w-36 rounded-lg"})]})}},59143:function(e,t,a){"use strict";a.d(t,{DataProvider:function(){return r},e:function(){return i}});var s=a(57437),n=a(2265);let l=(0,n.createContext)({data:null,loading:!0});function r(e){let{children:t}=e,[a,r]=(0,n.useState)(null),[i,d]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{fetch("/master_data.json").then(e=>e.json()).then(e=>{r(e),d(!1)}).catch(()=>d(!1))},[]),(0,s.jsx)(l.Provider,{value:{data:a,loading:i},children:t})}function i(){let e=(0,n.useContext)(l);if(!e)throw Error("useData must be used within DataProvider");return e}}},function(e){e.O(0,[648,971,117,744],function(){return e(e.s=24516)}),_N_E=e.O()}]);